---
title: "Mini-Project 2"
author: "Shuli Hu, Karina Huang, Iris Dong"
date: "October 31, 2017"
output: html_document
---


## Loading the data

```{r}
library(tidyverse)
library(dplyr)
```

```{r, include=FALSE}
load("house_elections.rda")
load("candidates.rda")
load("committees.rda")
load("contributions.rda")
```

```{r, message=FALSE, warning=FALSE}
library(tidyverse)
library(dplyr)
```


```{r}
# Karina
Con <- contributions %>%  ## New contribution dataset 
  filter(transaction_type == "24E" | transaction_type == "24A") %>% ## Filtering for transaction type: advocating and opposing election
  group_by(cand_id) %>% 
  summarise(Pro_CAN = sum(transaction_amt[entity_type == "CAN" & transaction_type == "24E"]), ## Summarise independent expediture by transaction types and entity (payee) types
            Pro_CCM = sum(transaction_amt[entity_type == "CCM" & transaction_type == "24E"]),
            Pro_COM = sum(transaction_amt[entity_type == "COM" & transaction_type == "24E"]),
            Pro_IND = sum(transaction_amt[entity_type == "IND" & transaction_type == "24E"]),
            Pro_ORG = sum(transaction_amt[entity_type == "ORG" & transaction_type == "24E"]),
            Pro_PAC = sum(transaction_amt[entity_type == "PAC" & transaction_type == "24E"]),
            Pro_PTY = sum(transaction_amt[entity_type == "PTY" & transaction_type == "24E"]),
            Con_Can = sum(transaction_amt[entity_type == "CAN" & transaction_type == "24A"]),
            Con_CCM = sum(transaction_amt[entity_type == "CCM" & transaction_type == "24A"]),
            Con_COM = sum(transaction_amt[entity_type == "COM" & transaction_type == "24A"]),
            Con_IND = sum(transaction_amt[entity_type == "IND" & transaction_type == "24A"]),
            Con_ORG = sum(transaction_amt[entity_type == "ORG" & transaction_type == "24A"]),
            Con_PAC = sum(transaction_amt[entity_type == "PAC" & transaction_type == "24A"]),
            Con_PTY = sum(transaction_amt[entity_type == "PTY" & transaction_type == "24A"])) %>%
  select(cand_id:Con_PTY)

Cand.id <- c(Con$cand_id) ## Vector for all ids in the new contribution dataset

Can <- candidates %>% ## New candidate dataset
  filter(cand_id %in% c(Cand.id)) %>% ## Filtering out ids not reflected in the contribution dataset
  select(cand_id:cand_office, cand_ici:cand_status) 
```





















































>>>>>>> 521d75e56e541d7eb04b56e48f2bfda83bd74260
